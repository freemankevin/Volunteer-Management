# 简道云API配置指南

## 🔧 问题诊断

当前遇到的API权限问题可能是由于以下原因之一：

1. **API端点不正确** - 简道云API版本更新
2. **权限配置问题** - API密钥权限不足
3. **应用ID错误** - APP_ID配置不正确

## ✅ 解决方案

### 1. 检查API配置

请确保您的 `.env` 文件包含正确的配置：

```bash
# .env 文件内容
APP_ID=您的应用ID
API_KEY=您的API密钥
```

### 2. 获取正确的API信息

#### 步骤1：登录简道云
- 访问 https://www.jiandaoyun.com
- 登录您的账号

#### 步骤2：获取应用ID
1. 进入您的应用
2. 点击右上角「应用设置」
3. 复制「应用ID」

#### 步骤3：获取API密钥
1. 点击右上角头像 → 「账户设置」
2. 选择「API」选项卡
3. 创建新的API密钥
4. 复制API密钥

### 3. 验证API权限

运行以下命令测试API连接：

```bash
python check_api.py
```

### 4. 创建测试表单（可选）

如果API连接正常，可以创建测试表单：

```bash
python scripts/setup_forms.py
```

## 📝 常见问题

### Q1: 权限被拒绝
**原因**: API密钥权限不足
**解决**: 确保API密钥有创建表单的权限

### Q2: 应用ID错误
**原因**: 使用了错误的应用ID
**解决**: 在简道云后台确认正确的应用ID

### Q3: API端点错误
**原因**: 使用了过时的API端点
**解决**: 使用最新的简道云API v5端点

## 🎯 下一步操作

1. **先运行权限检查**: `python check_api.py`
2. **如果权限正常**: 运行 `python scripts/setup_forms.py`
3. **如果权限有问题**: 按照上述步骤重新配置API

## 📞 技术支持

如果问题仍然存在，请联系：
- 简道云官方技术支持
- 检查简道云开发者文档
- 确认账号是否有企业版权限

## ✅ 验证成功标志

当API配置正确时，您应该看到：
```
✅ API连接成功！
📊 当前应用共有 X 个表单
```